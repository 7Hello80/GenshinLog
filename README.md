# 原神抽卡分析

一个基于 Flask 的原神抽卡记录分析工具，帮助玩家详细统计和分析抽卡数据。

## 功能特性

- 📊 **全面的统计分析** - 统计总抽数、五星/四星数量、原石消耗
- 🎯 **多卡池支持** - 支持角色活动祈愿、武器活动祈愿、常驻祈愿、集录祈愿
- 🎨 **精美的数据展示** - 展示角色/武器头像、保底进度条、原石消耗
- ⚡ **实时进度显示** - 分析过程中实时显示获取进度
- 🎭 **歪卡识别** - 自动识别并标记歪掉的常驻五星角色/武器

## 技术栈

### 后端
- Flask - Web 框架
- requests - HTTP 请求处理

### 前端
- Vue 2 - 前端框架
- Element UI - UI 组件库
- MDUI - 移动端 UI 框架
- Font Awesome - 图标库

## 项目结构

```
原神抽卡分析/
├── app.py              # Flask 主应用
├── config.py           # 卡池配置定义
├── ServerConfig.py     # 服务器配置
├── api/
│   └── api.py          # 抽卡 API 请求处理
├── static/
│   ├── script.js       # 前端 JavaScript 逻辑
│   └── style.css       # 前端样式
└── templates/
    └── index.html      # 前端页面模板
```

## 安装与运行

### 环境要求
- Python 3.6+
- pip

### 安装依赖
```bash
pip install flask requests
```

### 配置服务器
编辑 `ServerConfig.py` 文件修改服务器配置：
```python
ServerPort = 8080  # 服务器端口
DebugMode = False  # 是否开启 debug 模式
```

### 运行应用
```bash
python app.py
```

启动后访问 `http://localhost:8080` 即可使用。

## 使用方法

1. 使用HoYoGet等工具获取原神抽卡记录链接
2. 将抽卡链接粘贴到输入框中
3. 点击"开始分析"按钮
4. 等待分析完成，查看详细的抽卡统计数据

## 卡池类型

| ID | 名称 | 说明 |
|----|------|------|
| 301 | 角色活动祈愿 | 限定角色卡池 |
| 302 | 武器活动祈愿 | 限定武器卡池 |
| 200 | 常驻祈愿 | 永久卡池 |
| 500 | 集录祈愿 | 混合卡池 |

## API 接口

### POST /api/gachaLog
分析抽卡数据

**请求参数：**
```json
{
  "url": "抽卡记录链接",
  "task_id": "任务ID"
}
```

**响应示例：**
```json
{
  "success": true,
  "data": {
    "301": {
      "name": "角色活动祈愿",
      "pulls": [...],
      "four_star_pulls": [...],
      "stats": {...},
      "raw_data": [...]
    }
  }
}
```

### GET /api/getPage
获取分析进度

**请求参数：**
- `task_id`: 任务ID

### GET /api/avatars
获取角色和武器头像列表

## 常驻歪卡判定

应用会自动识别以下常驻五星角色/武器为"歪"：

**常驻角色：** 七七、迪卢克、琴、梦见月瑞希、莫娜、提纳里、迪希雅、刻晴

**常驻武器：** 天空之卷、天空之翼、天空之刃、天空之脊、天空之傲、狼的末路、和璞鸢、四风原典、阿莫斯之弓、风鹰剑

## 注意事项

1. 抽卡记录链接具有时效性，过期后需要重新获取
2. 分析过程需要遍历所有抽卡记录，可能需要一些时间

## 许可证

MIT License